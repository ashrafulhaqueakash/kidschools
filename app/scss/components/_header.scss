@use "../abstract" as *;

.site-header {
  .nav-item {
    .nav-link {
      border-bottom: 2px solid transparent;
      margin: 0 10px;
      &.active,
      &:hover {
        border-bottom: 2px solid $secondary;
      }
    }
  }

  &__bottom {
    position: relative;
    z-index: 1;
    padding-top: 15px;
    padding-bottom: 15px;

    .shape-1,
    .shape-2,
    .shape-3 {
        display: none;
        @media (min-width: 992px) {
          display: block;
        }
      img {
        width: 100%;
        height: 100%;
        object-fit: contain;
      }
    }
    .shape-1 {
      position: absolute;
      bottom: 0;
      left: 5%;
      width: 1.7%;
    }
    .shape-2 {
      position: absolute;
      top: 2px;
      right: 10%;
      width: 4.2%;
    }
    .shape-3 {
      position: absolute;
      bottom: 20px;
      right: 2%;
      width: 1.2%;
    }

    .header-btn {
      padding: 5px 10px;
      min-height: 44px;
      line-height: 1px;
      @media (min-width: 992px) {
        min-height: 54px;
        padding: 5px 10px;
      }
      i {
        margin-right: 8px;
      }
    }

    /* -------------------------
       MOBILE: left drawer menu
       ------------------------- */
    @media (max-width: 991px) {
      .navbar-brand {
        max-width: 180px;
      }
      .navbar-toggler {
        order: 3;
      }

      /* 1) Stop Bootstrap's height/display animation (causes jump) */
      .navbar .collapse {
        display: block !important; /* keep mounted; we'll animate with transform */
        height: 100% !important;
        overflow: visible !important;
        visibility: visible !important;
      }
      .navbar .collapsing {
        height: 100% !important;
        transition: none !important; /* kill height tween */
      }

      /* 2) Backdrop (hidden by default) */
      .menu-backdrop {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.4);
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.25s ease, visibility 0.25s ease;
        z-index: 1049; /* under the panel (1050) */
      }

      /* 3) Drawer panel */
      .main-menu {
        position: fixed;
        inset: 0 auto 0 0; /* top:0; right:auto; bottom:0; left:0 */
        background-color: $white;
        width: 100%;
        max-width: 320px;
        height: 100%;
        padding: 100px 30px 30px;
        transform: translateX(-100%); /* hidden off-canvas */
        transition: transform 0.3s ease;
        z-index: 1050;
        box-shadow: 0 0 0 rgba(0, 0, 0, 0);
        will-change: transform;
        backface-visibility: hidden;
        pointer-events: none; /* prevent stray taps when hidden */

        .navbar-nav {
          width: 100%;
        }
        .btn-close {
          position: absolute;
          right: 16px;
          top: 16px;
        }
      }

      /* 4) Visible/open state: Bootstrap adds .show */
      .main-menu.show {
        transform: translateX(0);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        pointer-events: auto;
      }

      /* 5) Show backdrop only when menu is open */
      .main-menu.show ~ .menu-backdrop {
        opacity: 1;
        visibility: visible;
      }

      /* 6) Optional: lock scroll (prevents layout shift) */
      body.menu-open {
        overflow: hidden;
        touch-action: none;
        -webkit-overflow-scrolling: auto;
      }
    }
  }
}
